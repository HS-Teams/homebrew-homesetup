# ~/.config/starship.toml
# Credits to: HomeSetup team

# Purpose: HomeSetup's rromao starship configuration file.
# Created: Aug 26, 2018
#  Author: <B>H</B>ugo <B>S</B>aporetti <B>J</B>unior
#  Mailto: homesetup@gmail.com
#    Site: https://github.com/yorevs/homesetup
#
# See a the full starship reference at:
# https://starship.rs/config/#prompt

# Inserts a blank line between shell prompts
add_newline = true

# Timeout for commands executed by starship (in milliseconds).
command_timeout = 250

# Timeout for starship to scan files (in milliseconds).
scan_timeout = 500

# Continuation prompt (PS2).
continuation_prompt = '… '

format = """\
[ BASH ](bold fg:#C4D3D4 bg:#B58901)\
[](bold fg:#B58901 bg:#083642)\
$username\
$hostname\
[](bold fg:#083642 bg:#258BD2)\
$time\
[](bold fg:#258bd2 bg:#2AA198)\
$directory\
[](bold fg:#2AA198 bg:#859901)\
$git_branch\
$git_metrics\
${custom.git_metrics_ext}\
$git_status\
[](bold fg:#859901)\
$line_break\
$character\
"""

[username]
style_user = "bold bg:#083642 fg:#C4D3D4"
style_root = "red"
format = "[(bold bg:#083642 fg:#C4D3D4) $user]($style)"
show_always = true
disabled = false

[hostname]
ssh_only = false
trim_at = "."
style = "bold bg:#083642 fg:#C4D3D4"
format = "[[@]($style)$hostname]($style)"
disabled = false

[time]
disabled = false
time_format = "%a %d %b - %H:%M" # DDD DD MMM - HH:MM
style = "bold bg:#258bd2"
format = '[[ $time ](bg:#258bd2 fg:#C4D3D4)]($style)'

[directory]
format = "[ $path ]($style)"
style = "bold fg:#C4D3D4 bg:#2AA198"

[git_branch]
format = '[ $symbol$branch(:$remote_branch) ]($style)'
symbol = " "
style = "bold fg:#C4D3D4 bg:#859901"

[git_status]
style = "bold fg:#C4D3D4 bg:#859901"
format = '[($all_status[$ahead_behind](fg:red bg:#859901))]($style)'
untracked = '?'
modified = '!'
deleted = '-'
stashed = '\$'
staged = '+'
renamed = '^'

[git_metrics]
format = "([+$added]($added_style)[/-$deleted]($deleted_style))[]($added_style)"
added_style = "fg:green bg:#859901"
deleted_style = "fg:red bg:#859901"
disabled = false

[custom.git_metrics_ext]
description = "Git metrics with staged and unstaged counts"
command = '''
#!/bin/sh

STATUS=$(git status --porcelain 2>/dev/null)
STAGED=$(echo "$STATUS" | grep -cE '^[AMDR]')
UNSTAGED=$(echo "$STATUS" | grep -cE '^[ MARC]')

if [[ $STAGED -gt 0 && $UNSTAGED -gt 0 ]]; then
  echo " ${STAGED}  ${UNSTAGED}"
elif [[ $STAGED -gt 0 ]]; then
  echo " ${STAGED}"
elif [[ $UNSTAGED -gt 0 ]]; then
  echo " ${UNSTAGED}"
fi
'''
when = "git rev-parse --is-inside-work-tree >/dev/null 2>&1"
style = "fg:yellow bg:#859901"
format="([ $output ]($style))[]($style)"

[hg_branch]
format = "[ $symbol$branch ]($style)"
symbol = " "

[cmd_duration]
format = "[ $duration ]($style)"
style = "bold fg:bright-white bg:18"

[character]
success_symbol = '[❯](#258bd3)'
error_symbol = '[❯](#258bd3)'
